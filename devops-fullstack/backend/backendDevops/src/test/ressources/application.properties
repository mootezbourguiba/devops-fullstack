# ============================================================
# === Configuration UNIQUEMENT pour la phase de TEST Maven ===
# ===    Utilisation de la base de données en mémoire H2   ===
# ============================================================

# URL pour H2 en mémoire. 'testdb' est le nom de la BD en mémoire.
# DB_CLOSE_DELAY=-1 garde la BD active tant que la JVM tourne.
spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE

# Driver H2
spring.datasource.driverClassName=org.h2.Driver

# Utilisateur/Mot de passe pour H2 (simples pour les tests)
spring.datasource.username=sa
spring.datasource.password=

# Dialecte Hibernate pour H2
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# Stratégie de génération du schéma pour les tests :
# 'create-drop' : Crée le schéma au début, le supprime à la fin. Idéal pour les tests.
spring.jpa.hibernate.ddl-auto=create-drop

# Ne PAS initialiser avec data.sql/schema.sql de src/main/resources pendant les tests H2,
# sauf si ces scripts sont compatibles H2 ET MySQL. 'create-drop' s'en charge.
# Si tu as des scripts spécifiques aux tests, mets-les dans src/test/resources et ajuste ce mode.
spring.sql.init.mode=never

# Optionnel: Afficher le SQL pendant l'exécution des tests
# spring.jpa.show-sql=true
# spring.jpa.properties.hibernate.format_sql=true